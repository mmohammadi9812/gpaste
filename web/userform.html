{/* TODO: https://codepen.io/inupurnomo/pen/MWWRmQr */}
{{ template "base.html" . }}

{{ define "title" }} {{ .title }} {{ end }}

{{ define "css" }}
<link rel="stylesheet" type="text/css" href="/assets/userform.css" />
{{ end }}

{{ define "body" }}

<main>
    <h1 style="text-align: center; color: #333;">{{ .title }}</h1>
    <div class="form-container">
        <form action="/api/{{ .action }}" method="post" id="signup-form">

            <label for="email">Email:</label>
            <input type="text" id="email" style="width: 300px;">
            <div id="email-error"></div>

            <label for="password">Password:</label>
            <input type="password" id="password" style="width: 300px;">
            <div id="password-error"></div>

            <button type="button" onclick="validateForm()">Signup</button>

        </form>
    </div>
</main>

<script>
    function validateForm() {
        const emailInput = document.getElementById("email");
        const passwordInput = document.getElementById("password");
        const emailError = document.getElementById("email-error");
        const passwordError = document.getElementById("password-error");

        const email = emailInput.value;
        const password = passwordInput.value;

        // Email validation
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(email)) {
            emailError.textContent = "Invalid email address";
        } else {
            emailError.textContent = "";
        }

        // Password validation
        const hasUppercase = /[A-Z]/.test(password);
        const hasLowercase = /[a-z]/.test(password);
        const hasNumber = /\d/.test(password);
        const hasSpecial = /[!#@$%^&*)(+=._-]/.test(password);

        const isValid = password.length >= 8 && hasUppercase && hasLowercase && hasNumber && hasSpecial;

        if (!isValid) {
            // FIXME: change error message based on real error
            passwordError.textContent = "Password must be at least 8 characters long";
        } else {
            passwordError.textContent = "";
        }
    }
</script>

{{ end }}
